<!--所有内容都为潭州学院Idle公开课所讲-->
<!doctype html>
<html>
	<meta charset="utf-8">
	<title>music</title>
	<head>
	<style type="text/css">
		body{
			background: url(images/1.jpg);
			font-size:16px;
			}
		#box{
			width:630px;
			border:2px solid red;
			margin:40px 0 0 40px;
			border-radius: 10px;
			overflow: hidden;
			box-shadow:0 0 40px pink;
		}
		#box img{float:left;}

		#box .lrcbox
		{
		overflow: hidden;
		width: 280px;
		height:280px;
		}
		#lrclist{
		transition:all 0.3s ease;
		}
		#box .lrcbox{
		width:379px;
		height:280px;
		border-left:3px solid red;
		float:left;
		}
		#box .lrcbox li{
		height:24px;
		padding:8px;
		}
		#box .lrcbox li.hover{
		color:pink;
		}
		#audio{
		margin:40px 0 0 40px;
		}
		footer {
		width:760px;
		margin:163px auto;
		background:#f0f;
		}
		footer p{
		margin:0;
		padding:10px 0;
		text-align:center;
		}
	</style>
	</head>
	<body>
	<textarea id ="lrcnt" style="display:none;">
[00:02.42]天涯
[00:10.26]作词:陈没 作曲:中岛美雪
[00:14.57]演唱：任贤齐
[00:20.26]
[00:42.88]昏天又暗地忍不住的流星
[00:46.37]烫不伤被冷藏一颗死心
[00:49.94]苦苦的追寻 茫茫然失去
[00:53.47]可爱的 可恨的 多可惜
[00:56.18]
[00:57.15]梦中的梦中梦中人的梦中
[01:00.59]梦不到被吹散往事如风
[01:04.13]空空的天空  容不下笑容
[01:07.70]伤神的 伤人的 太伤心
[01:10.30]
[01:11.33]何必想何必问何处是我家
[01:14.74]爱也罢 恨也罢 算了吧
[01:18.40]问天涯 望断了天涯
[01:21.88]赢得了天下 输了她
[01:24.54]
[01:25.61]挥别的种种挥不去的种种
[01:29.03]毁不了被淹没一往情深
[01:32.59]忍已无可忍 恨不得别人
[01:36.10]害人的 迷人的 痴情人
[01:38.63]
[01:39.77]也挣扎也牵挂也不是办法
[01:43.25]走也罢 留也罢 错了吗
[01:46.80]今天涯 明天又天涯
[01:50.35]狠狠一巴掌忘了吧
[01:54.68]
[02:22.31]昏天又暗地忍不住的流星
[02:25.89]烫不伤被冷藏一颗死心
[02:29.44]苦苦的追寻 茫茫然失去
[02:32.98]可爱的 可恨的 多可惜
[02:35.74]
[02:36.77]梦中的梦中梦中人的梦中
[02:40.10]梦不到被吹散往事如风
[02:43.62]空空的天空  容不下笑容
[02:47.17]伤神的 伤人的 太伤心
[02:49.79]
[02:50.89]何必想何必问何处是我家
[02:54.29]爱也罢 恨也罢 算了吧
[02:57.87]问天涯 望断了天涯
[03:01.43]赢得了天下 输了她
[03:04.04]
[03:05.16]挥别的种种挥不去的种种
[03:08.52]毁不了被淹没一往情深
[03:12.13]忍已无可忍 恨不得别人
[03:15.69]害人的 迷人的 痴情人
[03:18.30]
[03:19.42]也挣扎也牵挂也不是办法
[03:22.72]走也罢 留也罢 错了吗
[03:26.31]今天涯 明天又天涯
[03:29.92]狠狠一巴掌忘了吧
[03:32.70]
[03:33.70]梦中的梦中梦中人的梦中
[03:37.00]梦不到被吹散往事如风
[03:40.56]空空的天空  容不下笑容
[03:44.06]伤神的 伤人的 太伤心
[03:46.83]
[03:47.86]何必想何必问何处是我家
[03:51.24]爱也罢 恨也罢 算了吧
[03:54.79]问天涯 望断了天涯
[03:58.28]赢得了天下 输了她
[04:02.83]
[04:26.86]昏天又暗地忍不住的流星
[04:30.41]烫不伤被冷藏一颗死心
[04:33.82]苦苦的追寻 茫茫然失去
[04:37.47]可爱的 可恨的 多可惜
[04:40.22]
[04:41.24]梦中的梦中梦中人的梦中
[04:44.62]梦不到被吹散往事如风
[04:48.13]空空的天空  容不下笑容
[04:51.64]伤神的 伤人的 太伤心
[04:54.55]
[04:55.33]挥别的种种挥不去的种种
[04:58.83]毁不了被淹没一往情深
[05:02.39]忍已无可忍 恨不得别人
[05:05.94]害人的 迷人的 痴情人
[05:08.41]
[05:09.67]啦  啦
[05:19.06]
	</textarea>
	<div id="box">
		<img src="images/3.jpg" width="248" height="280"/>
		<div class="lrcbox" >
			<ul id="lrclist">
			</ul>
		</div>
	</div>
	<audio id="audio" src="天涯.mp3"autoplay loop controls ></audio>
	<script type = "text/javascript">
		function $(id)
		{
			return document.getElementById(id);
		}
		var audioDom=$("audio");
		window.onload = function()
		{	lrc.init($("lrcnt").value);
			//监控当前音乐拿到时间  跟对应的歌词进行配对
			audioDom.ontimeupdate=function()
			{
			var t =parseInt(this.currentTime);
			lrc.jump(t);
			};
		};
		var lrc={
		//左右空格
		regex_trim:/^\s+|\s+$/,
		init:function(lrctxts)
		{
		 	var txts=lrctxts.split("\n");
		 	var html="";
		 	for (var i=0;i<txts.length;i++)
		 		{
					var item = txts[i].replace(this.regex_trim,"");
					//歌词和时间分割
					var ms = item.split("]");
					//alert(ms[0]);
					//时间处理
					var mt = ms[0].replace("[","").split(":");
					//把分秒转化为秒，并赋予对应歌词作为id
					var m=parseInt(mt[0]*60+mt[1]*1);
					var txt=ms[1];
					if(txt!=null)
					{
					html+="<li id ='t_"+m+"'>"+txt+"</li>";
					}
		 		}
		 	$("lrclist").innerHTML+=html;
		},
		//歌词跳动
		jump:function(duration){
		//拿到具体题的歌词
		var dom = $('t_'+duration);
		var lrcbox=$("lrclist");
		if(dom){
		var arr=this.siblings(dom);
		//遍历兄弟元素，去除hover样式
			for(var i=0;i<arr.length;i++)
			{
				arr[i].className="";
			}
		//给对应的对象添加样式
		dom.className = "hover";
		var index = this.indexof(dom)-3;
		lrcbox.style.marginTop=(index<0?0:index)*-40+"px";
		}
		},
		indexof:function(dom){
		//获取ul下面的所有Li = 集合
			var listDoms = dom.parentElement.children;
			//遍历获取得到歌曲播放的当前歌词  并返回出来
			for (var i = 0;i<listDoms.length ;i++ )
			{  if(listDoms[i]==dom)
				{
					index = i;
					break;
				}
			}
				return index;
			},
			siblings:function(dom){
			var listDoms = dom.parentElement.children;
			var arr=[];
			//判断获取兄弟元素
			for (var i = 0;i<listDoms.length ;i++ )
			{  if(listDoms[i]!=dom)
				{
					arr.push(listDoms[i]);
				}
			}
			return arr;
			}
		};
		
	</script>
	<footer><p>此为潭州学院公开课Idle内容，我是听课写下来</p></footer>
	</body>
</html>